window.onload=function(){"use strict";var t=document.querySelectorAll(".popup--link");const n=document.querySelector("body"),i=document.querySelectorAll(".lock--padding"),a=document.querySelectorAll(".lock--padding--item"),l=window.innerWidth-document.querySelector(".body").offsetWidth+"px";let s=!0;const c=500;if(0<t.length)for(let e=0;e<t.length;e++){const p=t[e];p.addEventListener("click",function(e){var t=p.getAttribute("href").replace("#","");!function(e){{var t;e&&s&&((t=document.querySelector(".popup.open"))?r(t,!1):function(){var t=window.innerWidth-document.querySelector(".body").offsetWidth+"px";if(n.style.paddingRight=t,n.classList.add("_fixed"),s=!1,0<i.length)for(let e=0;e<i.length;e++){const o=i[e];o.style.paddingRight=t}setTimeout(function(){s=!0},c)}(),e.classList.add("open"),e.addEventListener("click",function(e){e.target.closest(".popup__content")||r(e.target.closest(".popup"))}))}}(document.getElementById(t)),e.preventDefault()})}var o=document.querySelectorAll(".popup--close");if(0<o.length)for(let e=0;e<o.length;e++){const d=o[e];d.addEventListener("click",function(e){r(d.closest(".popup")),e.preventDefault()})}function r(e,t){s&&(e.classList.remove("open"),void 0===t&&(setTimeout(function(){if(0<i.length)for(let e=0;e<i.length;e++){const o=i[e];o.style.paddingRight="0px"}if(0<a.length)for(let e=0;e<a.length;e++){const s=a[e];var t=parseInt(getComputedStyle(s).right)-parseInt(l)+"px";s.style.right=t}n.style.paddingRight="0px",n.classList.remove("_fixed")},c),s=!1,setTimeout(function(){s=!0},c)))}document.addEventListener("keydown",function(e){27===e.which&&r(document.querySelectorAll(".popup.open"))})},$(function(){$(window).width();let e=$(".body"),t=$("#header-fix");$(window).scroll(function(e){400<$(window).scrollTop()?(t.addClass("_open"),t.removeClass("_close")):(t.removeClass("_open"),t.addClass("_close"),o.hasClass("_active")&&i())});const s=$(".js-open-about-email"),o=$("#_in-mark"),n=$(".phone-block-dropdown");function i(){o.toggleClass("_active"),n.toggleClass("_active"),s.toggleClass("_active")}s.on("click",i),$(".js-city-select").select2({templateSelection:function(e){return e.id?"<img class='city-block__icon' src='images/icon/location.svg'/><span class='result-select'>"+e.text+"</span>":e.text},enoughRoomBelow:!0,enoughRoomAbove:!1,escapeMarkup:function(e){return e}}),$(".js-city-select").on("select2:open",function(e){$(".select2-search__field").attr("placeholder","Найти город"),$(".city-block").addClass("_active"),$(".select2-container:not(.select2)").addClass("_city-select"),$(".select2-dropdown p").length||$(".select2-dropdown").prepend('<p class="text _added-text-city">Выберите город</p>')}),$(".js-city-select").on("select2:close",function(e){$(".city-block").removeClass("_active")});const a=$("#mobMenu"),l=$(".js-toggle-mob-menu");l.on("click",function(){a.toggleClass("_open"),e.toggleClass("_fixed")});const c=$(".js-search-toggle"),r=$("#search-block");function p(){r.toggleClass("_open"),e.toggleClass("_fixed")}c.on("click",p);$(".js-mob-navigation").slinky({title:!0});const d=document.querySelectorAll(".button");d.forEach(e=>{e.addEventListener("mouseover",function(e){const t=Math.max(this.offsetWidth,this.offsetHeight),o=e.offsetX-t/2,s=e.offsetY-t/2,n=document.createElement("span");n.className="wave",n.style.cssText=`width:${t}px;height:${t}px;top:${s}px;left:${o}px`,this.appendChild(n),setTimeout(()=>n.remove(),700)})});new Swiper(".js-promo-slider",{loop:!0,navigation:{nextEl:".promo-slider__arrow_next",prevEl:".promo-slider__arrow_prev"},pagination:{el:".promo-slider__pagination",type:"bullets",clickable:!0}}),new Swiper(".js-promo-info-slider",{slidesPerView:1,pagination:{el:".promo-info-slider__pagination",type:"bullets"},breakpoints:{577:{slidesPerView:2,spaceBetween:20},1025:{slidesPerView:4,spaceBetween:0}}}),new Swiper(".js-slider-services",{slidesPerView:1,spaceBetween:20,pagination:{el:".services__pagination",type:"bullets"},navigation:{nextEl:".services__arrow_next",prevEl:".services__arrow_prev"},breakpoints:{577:{slidesPerView:2,spaceBetween:20,grid:{rows:1}},769:{slidesPerView:3,spaceBetween:30,grid:{rows:1}},1025:{slidesPerView:4,spaceBetween:0,grid:{rows:2}}}}),new Swiper(".js-recommendation-slider",{slidesPerView:1,spaceBetween:20,breakpoints:{769:{slidesPerView:2,spaceBetween:30},1025:{slidesPerView:2,spaceBetween:40}},navigation:{nextEl:".recommendation__arrow_next",prevEl:".recommendation__arrow_prev"}});$(document).on("click",".questions__btn",function(e){e.preventDefault(),$(this).parents(".questions__item").toggleClass("_active").find(".questions__text").slideToggle()});new Swiper(".js-reviews-slider",{slidesPerView:1,spaceBetween:0,autoHeight:!0,breakpoints:{769:{slidesPerView:2,spaceBetween:0,autoHeight:!1}},navigation:{nextEl:".reviews__arrow_next",prevEl:".reviews__arrow_prev"}});let g=new ymaps.Map("map",{center:[55.698112,37.70841],zoom:10}),u=e=>{g.setCenter(e,14,{checkZoomRange:!0})};$(".js-contact-btn").each((e,t)=>{var o=$(t).attr("data-coordinates"),s=$(t).attr("data-text"),t=$(t).attr("data-bullun"),o=JSON.parse(o);o=o,s=s,t=t,g.geoObjects.add(new ymaps.Placemark(o,{iconCaption:s,balloonContent:t},{preset:"islands#yellowFuelStationIcon"}))}),$(document).on("click",".js-contact-btn",function(e){var t;e.preventDefault(),$(this).hasClass("_active")?($(this).removeClass("_active"),$(this).parents(".contacts__slide").toggleClass("_active").find(".contacts__bottom-wrap").slideToggle(),t=JSON.parse($(this).attr("data-coordinates")),u(t)):($(".js-contact-btn").removeClass("_active"),$(this).addClass("_active"),$(".js-contact-btn").parents(".contacts__slide").removeClass("_active").find(".contacts__bottom-wrap").slideUp(),$(this).parents(".contacts__slide").addClass("_active").find(".contacts__bottom-wrap").slideDown(),t=JSON.parse($(this).attr("data-coordinates")),u(t))});const _=$(".contacts__list-wrap"),w=$(".contacts__list");let m=w.position().top;_.on("scroll",function(){m=w.position().top}),$(document).on("click",".contacts__arrow_prev",function(e){m=w.position().top,m+=100,_.animate({scrollTop:-1*m})}),$(document).on("click",".contacts__arrow_next",function(e){m=w.position().top,m-=100,_.animate({scrollTop:-1*m})});const h=$(".js-toggle-fly-basket"),f=$("#basket-fly");$(document).on("click",".js-toggle-fly-basket",function(e){f.toggleClass("_open")}),$(document).mouseup(function(e){s.is(e.target)||0!==s.has(e.target).length||n.is(e.target)||0!==n.has(e.target).length||n.hasClass("_active")&&i();const t=$(".search__wrap");t.is(e.target)||0!==t.has(e.target).length||c.is(e.target)||0!==c.has(e.target).length||r.hasClass("_open")&&p();const o=$("#basket-fly");o.hasClass("_open")&&(console.log(1),f.is(e.target)||0!==f.has(e.target).length||h.is(e.target)||0!==h.has(e.target).length||f.removeClass("_open"))})});